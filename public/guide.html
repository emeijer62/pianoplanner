<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Guide - PianoPlanner</title>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: #f5f7fa;
            color: #1a1a1a;
            line-height: 1.7;
        }

        /* Header */
        .header {
            background: white;
            padding: 16px 24px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.5rem;
            font-weight: 700;
            color: #1a1a1a;
            text-decoration: none;
        }

        .header-buttons {
            display: flex;
            gap: 12px;
        }

        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
            font-size: 14px;
        }

        .btn-secondary {
            background: #f5f5f5;
            color: #1a1a1a;
        }

        .btn-primary {
            background: #007AFF;
            color: white;
        }

        /* Layout */
        .container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            min-height: calc(100vh - 64px);
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: white;
            border-right: 1px solid #e5e5e5;
            padding: 24px 0;
            position: sticky;
            top: 64px;
            height: calc(100vh - 64px);
            overflow-y: auto;
        }

        .sidebar-title {
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #666;
            padding: 0 24px;
            margin-bottom: 12px;
            margin-top: 24px;
        }

        .sidebar-title:first-child {
            margin-top: 0;
        }

        .sidebar-link {
            display: block;
            padding: 10px 24px;
            color: #444;
            text-decoration: none;
            font-size: 14px;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }

        .sidebar-link:hover {
            background: #f5f7fa;
            color: #007AFF;
        }

        .sidebar-link.active {
            background: #e8f4ff;
            color: #007AFF;
            border-left-color: #007AFF;
            font-weight: 500;
        }

        /* Content */
        .content {
            flex: 1;
            padding: 40px 60px;
            max-width: 900px;
        }

        .content h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 16px;
            color: #1a1a1a;
        }

        .content .intro {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 48px;
            padding-bottom: 32px;
            border-bottom: 1px solid #e5e5e5;
        }

        .section {
            margin-bottom: 64px;
            scroll-margin-top: 100px;
        }

        .section h2 {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 16px;
            color: #1a1a1a;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .section h2 .icon {
            font-size: 1.5rem;
        }

        .section h3 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-top: 32px;
            margin-bottom: 12px;
            color: #333;
        }

        .section p {
            color: #444;
            margin-bottom: 16px;
        }

        .section ul, .section ol {
            margin-left: 24px;
            margin-bottom: 16px;
        }

        .section li {
            margin-bottom: 8px;
            color: #444;
        }

        /* Callout boxes */
        .callout {
            padding: 20px 24px;
            border-radius: 12px;
            margin: 24px 0;
        }

        .callout-info {
            background: #e8f4ff;
            border-left: 4px solid #007AFF;
        }

        .callout-warning {
            background: #fff8e6;
            border-left: 4px solid #FF9500;
        }

        .callout-success {
            background: #e8f8ef;
            border-left: 4px solid #34C759;
        }

        .callout-title {
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .callout p {
            margin-bottom: 0;
            font-size: 14px;
        }

        /* Steps */
        .steps {
            counter-reset: step;
            margin: 24px 0;
        }

        .step {
            position: relative;
            padding-left: 48px;
            padding-bottom: 24px;
            border-left: 2px solid #e5e5e5;
            margin-left: 16px;
        }

        .step:last-child {
            border-left-color: transparent;
            padding-bottom: 0;
        }

        .step::before {
            counter-increment: step;
            content: counter(step);
            position: absolute;
            left: -17px;
            top: 0;
            width: 32px;
            height: 32px;
            background: #007AFF;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
        }

        .step-title {
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 8px;
            color: #1a1a1a;
        }

        .step p {
            font-size: 14px;
            color: #666;
        }

        /* Code/path styling */
        code {
            background: #f0f0f0;
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 13px;
            color: #e83e8c;
        }

        .path {
            background: #1a1a1a;
            color: #fff;
            padding: 12px 16px;
            border-radius: 8px;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 13px;
            margin: 16px 0;
            overflow-x: auto;
        }

        /* Table */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 24px 0;
            font-size: 14px;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid #e5e5e5;
        }

        .comparison-table th {
            background: #f5f7fa;
            font-weight: 600;
        }

        .comparison-table tr:hover {
            background: #fafafa;
        }

        /* Footer */
        .footer {
            background: #1a1a1a;
            color: white;
            padding: 40px 24px;
            text-align: center;
        }

        .footer p {
            opacity: 0.7;
            font-size: 14px;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar {
                display: none;
            }

            .content {
                padding: 24px;
                max-width: 100%;
            }
        }

        @media (max-width: 768px) {
            html, body {
                overflow-x: hidden;
            }

            .header {
                padding: 12px 16px;
            }

            .header-content {
                flex-wrap: wrap;
                gap: 12px;
            }

            .header-buttons {
                width: 100%;
                justify-content: center;
            }

            .header-buttons .btn {
                padding: 8px 12px;
                font-size: 13px;
            }

            .content {
                padding: 16px;
            }

            .content h1 {
                font-size: 1.75rem;
            }

            .section h2 {
                font-size: 1.35rem;
            }

            .section h3 {
                font-size: 1.1rem;
            }

            .step {
                padding-left: 40px;
                margin-left: 12px;
            }

            .callout {
                padding: 16px;
            }

            .path {
                font-size: 11px;
                padding: 10px 12px;
                word-break: break-all;
            }

            .comparison-table {
                font-size: 12px;
                display: block;
                overflow-x: auto;
            }

            .comparison-table th,
            .comparison-table td {
                padding: 8px 10px;
                white-space: nowrap;
            }

            code {
                font-size: 12px;
                word-break: break-all;
            }

            .footer {
                padding: 24px 16px;
            }
            
            /* Mobile Accordion Styles */
            .section {
                margin-bottom: 0;
                background: white;
                border-radius: 12px;
                margin-bottom: 12px;
                overflow: hidden;
                box-shadow: 0 1px 3px rgba(0,0,0,0.08);
            }
            
            .section h2 {
                cursor: pointer;
                padding: 18px 20px;
                margin: 0;
                font-size: 1.1rem;
                display: flex;
                align-items: center;
                justify-content: space-between;
                background: white;
                transition: background 0.2s;
                -webkit-tap-highlight-color: transparent;
            }
            
            .section h2:active {
                background: #f5f7fa;
            }
            
            .section h2 .section-title-text {
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .section h2 .accordion-icon {
                width: 24px;
                height: 24px;
                color: #999;
                transition: transform 0.3s ease;
                flex-shrink: 0;
            }
            
            .section.open h2 .accordion-icon {
                transform: rotate(180deg);
            }
            
            .section-content {
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.3s ease-out;
                padding: 0 20px;
            }
            
            .section.open .section-content {
                max-height: 2000px;
                padding: 0 20px 20px;
                transition: max-height 0.5s ease-in;
            }
            
            .section h3 {
                margin-top: 20px;
            }
            
            .section h3:first-child {
                margin-top: 0;
            }
            
            .content .intro {
                background: white;
                border-radius: 12px;
                padding: 20px;
                margin-bottom: 16px;
                box-shadow: 0 1px 3px rgba(0,0,0,0.08);
            }
            
            .content h1 {
                padding: 0 4px;
                margin-bottom: 16px;
            }
        }

        /* Print */
        @media print {
            .sidebar, .header {
                display: none;
            }

            .content {
                max-width: 100%;
                padding: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <a href="/dashboard.html" class="logo">
                <img src="/assets/logo.png" alt="PianoPlanner" style="height: 48px; width: auto;">
            </a>
            <div class="header-buttons">
                <a href="/about.html" class="btn btn-secondary">About PianoPlanner</a>
                <a href="/dashboard.html" class="btn btn-primary">Go to Dashboard</a>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-title">Getting Started</div>
            <a href="#start" class="sidebar-link active">First Steps</a>
            <a href="#business-details" class="sidebar-link">Business Details</a>
            <a href="#working-hours" class="sidebar-link">Working Hours & Buffers</a>
            <a href="#service-area" class="sidebar-link">Service Area</a>

            <div class="sidebar-title">Calendar Integration</div>
            <a href="#google-calendar" class="sidebar-link">Connect Google Calendar</a>
            <a href="#microsoft-calendar" class="sidebar-link">Connect Microsoft 365</a>
            <a href="#apple-calendar" class="sidebar-link">Connect iCloud Calendar</a>
            <a href="#sync-methods" class="sidebar-link">Sync Methods Explained</a>

            <div class="sidebar-title">Email Setup</div>
            <a href="#custom-domain" class="sidebar-link">Send from Your Domain</a>
            <a href="#email-templates" class="sidebar-link">Email Templates</a>

            <div class="sidebar-title">Online Booking</div>
            <a href="#booking-link" class="sidebar-link">Create Booking Link</a>
            <a href="#customer-link" class="sidebar-link">Personal Customer Links</a>
            <a href="#smart-suggestions" class="sidebar-link">Smart Suggestions</a>
            <a href="#theater-availability" class="sidebar-link">Theater Availability</a>

            <div class="sidebar-title">Pianos & Service</div>
            <a href="#piano-service" class="sidebar-link">Service History</a>
            <a href="#slot-duration" class="sidebar-link">Calendar Slot Duration</a>
        </nav>

        <!-- Main Content -->
        <main class="content">
            <h1><i data-lucide="book-open" style="width: 24px; height: 24px;"></i> User Guide</h1>
            <p class="intro">
                Welcome to the PianoPlanner user guide! This guide helps you make the most of all features. 
                Follow the steps in order for the best experience, or jump directly to the topic you need.
            </p>

            <!-- FIRST STEPS -->
            <section id="start" class="section">
                <h2><span class="icon"><i data-lucide="rocket" style="width: 24px; height: 24px;"></i></span> First Steps</h2>
                <p>
                    Before you can start scheduling, it's important to set up your account properly. 
                    The order below ensures all features work optimally.
                </p>

                <div class="callout callout-info">
                    <div class="callout-title"><i data-lucide="lightbulb" style="width: 18px; height: 18px;"></i> Recommended Order</div>
                    <p>
                        1. Business Details → 2. Working Hours → 3. Service Area → 4. Calendar → 5. Email → 6. Booking Link
                    </p>
                </div>

                <p>
                    Take some time to configure everything properly. This saves you work later and ensures that:
                </p>
                <ul>
                    <li>Travel times are calculated correctly</li>
                    <li>Customers can only book when you're available</li>
                    <li>Emails look professional with your own details</li>
                    <li>Appointments automatically appear in your calendar</li>
                </ul>
            </section>

            <!-- BUSINESS DETAILS -->
            <section id="business-details" class="section">
                <h2><span class="icon"><i data-lucide="building" style="width: 24px; height: 24px;"></i></span> Business Details</h2>
                <p>
                    Your business details are essential for PianoPlanner to work properly. The address is used as 
                    <strong>starting point for travel time calculations</strong> and appears on emails to customers.
                </p>

                <div class="callout callout-warning">
                    <div class="callout-title"><i data-lucide="alert-triangle" style="width: 18px; height: 18px;"></i> Important</div>
                    <p>
                        Without a correct address, travel times cannot be calculated. Fill this in first!
                    </p>
                </div>

                <h3>How to set up your business details:</h3>
                <div class="steps">
                    <div class="step">
                        <div class="step-title">Go to Settings</div>
                        <p>Click on <code>Settings</code> in the menu, or go directly to the "Company" tab.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Fill in your details</div>
                        <p>Business name, your name, email, phone and full address. Use Google Maps suggestions for an exact address.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Upload your logo (optional)</div>
                        <p>Your logo appears on the booking page and in emails.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Set your timezone</div>
                        <p>Default is Europe/Amsterdam. Adjust if needed.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Click Save</div>
                        <p>Your details are saved and applied immediately.</p>
                    </div>
                </div>
            </section>

            <!-- WORKING HOURS AND BUFFERS -->
            <section id="working-hours" class="section">
                <h2><span class="icon"><i data-lucide="clock" style="width: 24px; height: 24px;"></i></span> Working Hours & Buffers</h2>
                <p>
                    Set when you're available for appointments. This determines when customers can book online 
                    and helps with planning your day.
                </p>

                <h3>Working Days and Times</h3>
                <p>
                    Go to <code>Settings → Company</code> and scroll to "Working Hours". Here you can set per day:
                </p>
                <ul>
                    <li>Whether you work that day (on/off per day)</li>
                    <li>Start and end time of your workday</li>
                    <li>Break times (optional)</li>
                </ul>

                <h3>Setting Buffers</h3>
                <p>
                    Buffers provide breathing room between appointments. You'll find these settings at <code>Settings → Availability</code>.
                </p>

                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Buffer Type</th>
                            <th>What does it do?</th>
                            <th>Recommended</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Buffer before appointment</strong></td>
                            <td>Extra time before an appointment (e.g., for preparation)</td>
                            <td>0-15 minutes</td>
                        </tr>
                        <tr>
                            <td><strong>Buffer after appointment</strong></td>
                            <td>Extra time after an appointment (e.g., for notes)</td>
                            <td>15-30 minutes</td>
                        </tr>
                        <tr>
                            <td><strong>Minimum booking time</strong></td>
                            <td>How far in advance must bookings be made?</td>
                            <td>24-48 hours</td>
                        </tr>
                    </tbody>
                </table>

                <div class="callout callout-success">
                    <div class="callout-title"><i data-lucide="check-circle" style="width: 18px; height: 18px;"></i> Tip</div>
                    <p>
                        Set a buffer of at least 15 minutes between appointments. This allows for overruns and travel time.
                    </p>
                </div>
            </section>

            <!-- SERVICE AREA -->
            <section id="service-area" class="section">
                <h2><span class="icon"><i data-lucide="map" style="width: 24px; height: 24px;"></i></span> Service Area (Maximum Travel Time)</h2>
                <p>
                    Don't want to travel too far for an appointment? Set a maximum travel time. Customers outside your 
                    service area will get a notification when booking.
                </p>

                <h3>How to set your service area:</h3>
                <div class="steps">
                    <div class="step">
                        <div class="step-title">Go to Settings → Travel Time</div>
                        <p>Here you'll find all settings for travel times and service area.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Enable area check</div>
                        <p>Turn on the option "Check maximum travel time".</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Set maximum travel time</div>
                        <p>For example: 45 minutes. Appointments further away will show a warning.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Customize the message (optional)</div>
                        <p>Write a custom message for customers outside your area, for example with alternative options.</p>
                    </div>
                </div>

                <div class="callout callout-info">
                    <div class="callout-title"><i data-lucide="lightbulb" style="width: 18px; height: 18px;"></i> Extra option: travel time between appointments</div>
                    <p>
                        You can also set a maximum travel time between consecutive appointments. 
                        This prevents you from having to rush from one city to another.
                    </p>
                </div>
            </section>

            <!-- GOOGLE CALENDAR -->
            <section id="google-calendar" class="section">
                <h2><span class="icon"><i data-lucide="calendar" style="width: 24px; height: 24px;"></i></span> Connect Google Calendar</h2>
                <p>
                    Connect your Google Calendar for <strong>two-way synchronization</strong>. Appointments automatically 
                    appear in your calendar, and changes in Google sync back to PianoPlanner.
                </p>

                <h3>Creating the Connection</h3>
                <div class="steps">
                    <div class="step">
                        <div class="step-title">Go to Settings → Calendar</div>
                        <p>Open the "Calendar Sync" tab.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Click "Connect Google Calendar"</div>
                        <p>You'll be redirected to Google to grant permission.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Grant permission</div>
                        <p>Log in with your Google account and allow access to your calendar.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Choose your calendar</div>
                        <p>Select the calendar where appointments should appear.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Set sync direction</div>
                        <p>Choose two-way sync, or only from PianoPlanner to Google.</p>
                    </div>
                </div>

                <h3>Sync Options</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Option</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Two-way sync</strong></td>
                            <td>Changes in both systems are synchronized</td>
                        </tr>
                        <tr>
                            <td><strong>To Google only</strong></td>
                            <td>Appointments go to Google, but changes in Google aren't synced back</td>
                        </tr>
                        <tr>
                            <td><strong>Include travel time</strong></td>
                            <td>Add travel time as a separate calendar item before the appointment</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- MICROSOFT CALENDAR -->
            <section id="microsoft-calendar" class="section">
                <h2><span class="icon"><i data-lucide="calendar" style="width: 24px; height: 24px;"></i></span> Connect Microsoft 365 / Outlook</h2>
                <p>
                    Use Outlook or Microsoft 365? Connect your calendar directly with PianoPlanner! 
                    This enables <strong>two-way sync</strong>: appointments appear in Outlook, and 
                    your existing events are checked for availability.
                </p>

                <h3>What you need</h3>
                <ul>
                    <li>A Microsoft account (personal Outlook.com or Office 365 work account)</li>
                    <li>Access to your calendar in Outlook or Microsoft 365</li>
                </ul>

                <h3>Connecting Microsoft Calendar</h3>
                <div class="steps">
                    <div class="step">
                        <div class="step-title">Go to Settings → Calendar</div>
                        <p>Navigate to the Calendar settings section.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Click "Connect Microsoft"</div>
                        <p>You'll be redirected to Microsoft's login page.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Log in and grant permission</div>
                        <p>Microsoft asks permission to access your calendar. Click "Accept".</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Done!</div>
                        <p>You'll be redirected back. Your Microsoft Calendar is now connected.</p>
                    </div>
                </div>

                <h3>What gets synced?</h3>
                <ul>
                    <li><strong>Appointments created in PianoPlanner</strong> are automatically added to your Outlook calendar</li>
                    <li><strong>Existing events in Outlook</strong> are used to check your availability (Smart Appointments)</li>
                    <li><strong>Deleted appointments</strong> are also removed from your calendar</li>
                </ul>

                <div class="callout callout-success">
                    <div class="callout-title"><i data-lucide="check-circle" style="width: 18px; height: 18px;"></i> Works with both account types</div>
                    <p>
                        Microsoft Calendar integration works with both personal Microsoft accounts (Outlook.com, Hotmail) 
                        and organizational Office 365/Microsoft 365 work accounts.
                    </p>
                </div>
            </section>

            <!-- APPLE CALENDAR -->
            <section id="apple-calendar" class="section">
                <h2><span class="icon"><i data-lucide="calendar" style="width: 24px; height: 24px;"></i></span> Connect iCloud / Apple Calendar</h2>
                <p>
                    Prefer using Apple Calendar or iCloud? That works too! The connection uses CalDAV and 
                    requires an <strong>app-specific password</strong>.
                </p>

                <div class="callout callout-warning">
                    <div class="callout-title"><i data-lucide="alert-triangle" style="width: 18px; height: 18px;"></i> Required: App-Specific Password</div>
                    <p>
                        Apple doesn't allow apps to use your regular password. You must first create a 
                        special password at appleid.apple.com.
                    </p>
                </div>

                <h3>Creating an App-Specific Password</h3>
                <div class="steps">
                    <div class="step">
                        <div class="step-title">Go to appleid.apple.com</div>
                        <p>Log in with your Apple ID.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Click "App-Specific Passwords"</div>
                        <p>You'll find this under "Sign-In and Security".</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Click "Generate Password"</div>
                        <p>Give it a name like "PianoPlanner".</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Copy the password</div>
                        <p>The password is only shown once! Copy it immediately.</p>
                    </div>
                </div>

                <h3>Connection in PianoPlanner</h3>
                <div class="steps">
                    <div class="step">
                        <div class="step-title">Go to Settings → Calendar → Apple</div>
                        <p>Open the Apple Calendar tab.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Enter your Apple ID email</div>
                        <p>The email address you use to log in to Apple.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Paste the app-specific password</div>
                        <p>The password you just created.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Click "Connect"</div>
                        <p>PianoPlanner tests the connection and shows your calendars.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Select the right calendar</div>
                        <p>Choose the calendar where appointments should appear.</p>
                    </div>
                </div>
            </section>

            <!-- SYNC METHODS -->
            <section id="sync-methods" class="section">
                <h2><span class="icon"><i data-lucide="refresh-cw" style="width: 24px; height: 24px;"></i></span> Sync Methods Explained</h2>
                <p>
                    PianoPlanner offers multiple ways to sync your calendar. Here's an overview 
                    of the differences.
                </p>

                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Method</th>
                            <th>Direction</th>
                            <th>Real-time?</th>
                            <th>Best for</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Google Calendar API</strong></td>
                            <td><i data-lucide="refresh-cw" style="width: 14px; height: 14px;"></i> Two-way</td>
                            <td><i data-lucide="check" style="width: 16px; height: 16px;"></i> Yes</td>
                            <td>Full integration with Google</td>
                        </tr>
                        <tr>
                            <td><strong>Microsoft 365 / Outlook</strong></td>
                            <td><i data-lucide="refresh-cw" style="width: 14px; height: 14px;"></i> Two-way</td>
                            <td><i data-lucide="check" style="width: 16px; height: 16px;"></i> Yes</td>
                            <td>Office 365, Outlook.com users</td>
                        </tr>
                        <tr>
                            <td><strong>Apple CalDAV</strong></td>
                            <td><i data-lucide="refresh-cw" style="width: 14px; height: 14px;"></i> Two-way</td>
                            <td><i data-lucide="check" style="width: 16px; height: 16px;"></i> Yes</td>
                            <td>Apple/iCloud users</td>
                        </tr>
                        <tr>
                            <td><strong>iCal Feed (subscription)</strong></td>
                            <td><i data-lucide="arrow-right" style="width: 14px; height: 14px;"></i> Read only</td>
                            <td><i data-lucide="clock" style="width: 14px; height: 14px;"></i> Every 15-60 min</td>
                            <td>Other calendar apps</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Using iCal Feed</h3>
                <p>
                    Want to view your appointments in an app that doesn't support direct connection? 
                    Use the iCal feed URL.
                </p>
                <div class="steps">
                    <div class="step">
                        <div class="step-title">Go to Settings → Calendar → iCal Feed</div>
                        <p>Here you'll find your personal feed URL.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Copy the URL</div>
                        <p>This URL is unique to your account. Don't share it!</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Subscribe in your calendar app</div>
                        <p>Add the URL as a "calendar subscription" in Outlook, Thunderbird, etc.</p>
                    </div>
                </div>

                <div class="callout callout-info">
                    <div class="callout-title"><i data-lucide="lightbulb" style="width: 18px; height: 18px;"></i> Which method to use?</div>
                    <p>
                        <strong>Google user?</strong> Use Google Calendar connection.<br>
                        <strong>Microsoft 365 / Outlook user?</strong> Use Microsoft Calendar connection.<br>
                        <strong>iPhone/Mac user?</strong> Use Apple Calendar connection.<br>
                        <strong>Other app?</strong> Use iCal feed.
                    </p>
                </div>
            </section>

            <!-- CUSTOM EMAIL DOMAIN -->
            <section id="custom-domain" class="section">
                <h2><span class="icon"><i data-lucide="mail" style="width: 24px; height: 24px;"></i></span> Send Email from Your Domain</h2>
                <p>
                    By default, PianoPlanner sends emails via our servers. Want to send emails from your own 
                    email address (e.g., info@yourbusiness.com)? Configure your own SMTP server.
                </p>

                <h3>Why use your own SMTP?</h3>
                <ul>
                    <li>Emails come from your own email address</li>
                    <li>Customers can reply directly to your inbox</li>
                    <li>Better deliverability (less chance of spam)</li>
                    <li>More professional appearance</li>
                </ul>

                <h3>SMTP Setup</h3>
                <div class="steps">
                    <div class="step">
                        <div class="step-title">Go to Settings → Email → SMTP</div>
                        <p>Open the SMTP configuration.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Enter your SMTP details</div>
                        <p>You get these from your email provider or web host:</p>
                    </div>
                </div>

                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Field</th>
                            <th>Example</th>
                            <th>Explanation</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>SMTP Host</strong></td>
                            <td>smtp.mydomain.com</td>
                            <td>Server address of your email provider</td>
                        </tr>
                        <tr>
                            <td><strong>Port</strong></td>
                            <td>587 or 465</td>
                            <td>587 for TLS, 465 for SSL</td>
                        </tr>
                        <tr>
                            <td><strong>Username</strong></td>
                            <td>info@mydomain.com</td>
                            <td>Often your full email address</td>
                        </tr>
                        <tr>
                            <td><strong>Password</strong></td>
                            <td>••••••••</td>
                            <td>Password for your email account</td>
                        </tr>
                        <tr>
                            <td><strong>From address</strong></td>
                            <td>info@mydomain.com</td>
                            <td>Sender in outgoing emails</td>
                        </tr>
                    </tbody>
                </table>

                <div class="callout callout-success">
                    <div class="callout-title"><i data-lucide="check-circle" style="width: 18px; height: 18px;"></i> Test your settings</div>
                    <p>
                        After entering details, you can send a test email. Check if it arrives and doesn't end up in spam.
                    </p>
                </div>

                <h3>Common SMTP Settings</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Provider</th>
                            <th>Host</th>
                            <th>Port</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Gmail</td>
                            <td>smtp.gmail.com</td>
                            <td>587</td>
                        </tr>
                        <tr>
                            <td>Outlook/Microsoft 365</td>
                            <td>smtp.office365.com</td>
                            <td>587</td>
                        </tr>
                        <tr>
                            <td>TransIP</td>
                            <td>smtp.transip.email</td>
                            <td>587</td>
                        </tr>
                        <tr>
                            <td>Strato</td>
                            <td>smtp.strato.com</td>
                            <td>587</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- EMAIL TEMPLATES -->
            <section id="email-templates" class="section">
                <h2><span class="icon"><i data-lucide="mail" style="width: 24px; height: 24px;"></i></span> Customize Email Templates</h2>
                <p>
                    Customize automatic emails with your own text and style. You can use variables that 
                    are automatically filled in.
                </p>

                <h3>Available Templates</h3>
                <ul>
                    <li><strong>Confirmation email</strong> - Sent after booking an appointment</li>
                    <li><strong>Reminder email</strong> - Sent 24/48 hours before the appointment</li>
                    <li><strong>Cancellation email</strong> - Sent when cancelled</li>
                    <li><strong>Modification email</strong> - Sent when date/time changes</li>
                </ul>

                <h3>Editing a Template</h3>
                <div class="steps">
                    <div class="step">
                        <div class="step-title">Go to Settings → Email → Templates</div>
                        <p>Here you see all available templates.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Click a template to edit</div>
                        <p>You can customize the subject and content.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Use variables</div>
                        <p>Add dynamic content with the variables below.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Preview and save</div>
                        <p>View a preview and save your changes.</p>
                    </div>
                </div>

                <h3>Available Variables</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Variable</th>
                            <th>Replaced by</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>{{customer_name}}</code></td>
                            <td>Customer's name</td>
                        </tr>
                        <tr>
                            <td><code>{{date}}</code></td>
                            <td>Appointment date</td>
                        </tr>
                        <tr>
                            <td><code>{{time}}</code></td>
                            <td>Appointment start time</td>
                        </tr>
                        <tr>
                            <td><code>{{service}}</code></td>
                            <td>Service type (e.g., Tuning)</td>
                        </tr>
                        <tr>
                            <td><code>{{company_name}}</code></td>
                            <td>Your company name</td>
                        </tr>
                        <tr>
                            <td><code>{{company_phone}}</code></td>
                            <td>Your phone number</td>
                        </tr>
                        <tr>
                            <td><code>{{company_email}}</code></td>
                            <td>Your email address</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- BOOKING LINK -->
            <section id="booking-link" class="section">
                <h2><span class="icon"><i data-lucide="link" style="width: 24px; height: 24px;"></i></span> Booking Link for Your Website</h2>
                <p>
                    Let customers book appointments online via your own booking page. 
                    You get a unique URL to place on your website.
                </p>

                <h3>Activating Your Booking Link</h3>
                <div class="steps">
                    <div class="step">
                        <div class="step-title">Go to Settings → Online Booking</div>
                        <p>Open the online booking settings.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Enable online booking</div>
                        <p>Turn the switch to "On".</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Choose your URL slug</div>
                        <p>This becomes your unique address, e.g.: <code>pianoplanner.app/book/yourcompany</code></p>
                    </div>
                    <div class="step">
                        <div class="step-title">Select available services</div>
                        <p>Choose which services customers can book online.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Copy and share your link</div>
                        <p>Place the link on your website, business card, or in your email signature.</p>
                    </div>
                </div>

                <h3>Adding to Your Website</h3>
                <p>You can integrate the link in various ways:</p>

                <p><strong>As a simple link:</strong></p>
                <div class="path">&lt;a href="https://pianoplanner.app/book/yourcompany"&gt;Book an appointment&lt;/a&gt;</div>

                <p><strong>As a button:</strong></p>
                <div class="path">&lt;a href="https://pianoplanner.app/book/yourcompany" class="button"&gt;Book Online&lt;/a&gt;</div>

                <div class="callout callout-success">
                    <div class="callout-title"><i data-lucide="check-circle" style="width: 18px; height: 18px;"></i> Tip: QR Code</div>
                    <p>
                        Generate a QR code from your booking link. Great for flyers, business cards, or posters!
                    </p>
                </div>
            </section>

            <!-- PERSONAL CUSTOMER LINK -->
            <section id="customer-link" class="section">
                <h2><span class="icon"><i data-lucide="building" style="width: 24px; height: 24px;"></i></span> Personal Links for Regular Customers</h2>
                <p>
                    Do you have customers with recurring appointments, like theaters, music schools, or conservatories? 
                    Create a <strong>personal booking link</strong> so they can quickly book with pre-filled details.
                </p>

                <div class="callout callout-info">
                    <div class="callout-title"><i data-lucide="lightbulb" style="width: 18px; height: 18px;"></i> Perfect for</div>
                    <p>
                        • Theaters and concert halls<br>
                        • Music schools<br>
                        • Conservatories<br>
                        • Churches with regular tunings<br>
                        • Regular private customers
                    </p>
                </div>

                <h3>Creating a Personal Link</h3>
                <div class="steps">
                    <div class="step">
                        <div class="step-title">Go to the customer page</div>
                        <p>Open the customer's detail page.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Click "Generate Booking Link"</div>
                        <p>You'll find this under customer details or in the actions menu.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Copy the unique link</div>
                        <p>This link contains a unique code for this customer.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Share with the customer</div>
                        <p>Send the link by email or add it to their contact person.</p>
                    </div>
                </div>

                <h3>What happens?</h3>
                <p>When the customer opens the link:</p>
                <ul>
                    <li>Name and contact details are pre-filled</li>
                    <li>Address is known (no travel time surprise)</li>
                    <li>Customer's pianos are shown</li>
                    <li>They only need to choose date/time</li>
                </ul>

                <div class="callout callout-success">
                    <div class="callout-title"><i data-lucide="check-circle" style="width: 18px; height: 18px;"></i> Example: Theater</div>
                    <p>
                        A theater needs the grand piano tuned 4x per year. With their personal link, they can 
                        choose the date that suits them, without filling in details each time. 
                        You get notified immediately and the appointment is in your calendar.
                    </p>
                </div>

                <h3>Setting a Default Service per Customer</h3>
                <p>
                    Want a customer to only book a specific service via their personal link? 
                    That's possible! Handy for customers who always use the same service.
                </p>
                <div class="steps">
                    <div class="step">
                        <div class="step-title">Edit the customer</div>
                        <p>Go to Customers and click "Edit" for the desired customer.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Select a default service</div>
                        <p>At "Default service for self-booking" choose the service this customer can book.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Save</div>
                        <p>Click "Save Customer" to apply the setting.</p>
                    </div>
                </div>
                <div class="callout callout-info">
                    <div class="callout-title"><i data-lucide="lightbulb" style="width: 18px; height: 18px;"></i> Result</div>
                    <p>
                        When the customer opens the booking link, they only see the selected service. 
                        No confusion, no wrong choices. Leave the field empty for all services.
                    </p>
                </div>
            </section>

            <!-- SMART SUGGESTIONS -->
            <section id="smart-suggestions" class="section">
                <h2><span class="icon"><i data-lucide="lightbulb" style="width: 24px; height: 24px;"></i></span> Smart Booking Suggestions</h2>
                <p>
                    When customers book via their personal link, they automatically see 
                    <strong>smart time suggestions</strong>. The system analyzes your existing appointments 
                    and suggests the most efficient time slots.
                </p>

                <h3>How does it work?</h3>
                <p>
                    Instead of manually choosing a date and time, the customer sees a list 
                    of recommended times. These are calculated based on:
                </p>
                <ul>
                    <li><strong>Existing appointments</strong> - Slots just before or after other appointments nearby</li>
                    <li><strong>Location</strong> - Minimal travel time between appointments</li>
                    <li><strong>Working hours</strong> - Only within your available times</li>
                    <li><strong>Theater hours</strong> - Separate hours for theaters if configured</li>
                </ul>

                <div class="callout callout-success">
                    <div class="callout-title"><i data-lucide="check-circle" style="width: 18px; height: 18px;"></i> Benefits</div>
                    <p>
                        • More efficient route planning - fewer miles driven<br>
                        • Customers choose faster - no doubt about availability<br>
                        • Better schedule - appointments cluster in the same area
                    </p>
                </div>

                <h3>What does the customer see?</h3>
                <p>After selecting a service, up to 6 optimal time slots appear:</p>
                <ul>
                    <li><strong>Recommended</strong> - The most efficient time (green badge)</li>
                    <li><strong>Alternative</strong> - Good options on other days (orange badge)</li>
                </ul>
                <p>
                    The customer can also choose "Pick another time" to manually select a date and time.
                </p>
            </section>

            <!-- THEATER AVAILABILITY -->
            <section id="theater-availability" class="section">
                <h2><span class="icon"><i data-lucide="building" style="width: 24px; height: 24px;"></i></span> Theater Availability</h2>
                <p>
                    Theaters, concert halls, and other venues often have different availability than private customers. 
                    They're mainly available evenings and weekends. With <strong>Theater Availability</strong> 
                    you can set separate working hours for this type of customer.
                </p>

                <h3>Setting Theater Hours</h3>
                <div class="steps">
                    <div class="step">
                        <div class="step-title">Go to Settings → Company</div>
                        <p>Scroll to the "Theater Availability" section.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Enable Theater Hours</div>
                        <p>Turn the switch to "On" to activate theater hours.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Set the times</div>
                        <p>Specify per day when you're available for theaters. 
                        For example: weekdays 18:00-22:00, weekends 10:00-18:00.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Save</div>
                        <p>Click "Save" to store the theater hours.</p>
                    </div>
                </div>

                <h3>Marking a Customer as Theater</h3>
                <p>To let a customer use theater hours:</p>
                <div class="steps">
                    <div class="step">
                        <div class="step-title">Open customer details</div>
                        <p>Go to Customers and click "Edit" for the desired customer.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Check "Use theater availability"</div>
                        <p>This option only appears if theater hours are enabled.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Save</div>
                        <p>The customer can now book based on your theater hours.</p>
                    </div>
                </div>

                <div class="callout callout-info">
                    <div class="callout-title"><i data-lucide="lightbulb" style="width: 18px; height: 18px;"></i> Example</div>
                    <p>
                        <strong>Normal working hours:</strong> Mon-Fri 09:00-17:00<br>
                        <strong>Theater hours:</strong> Mon-Fri 18:00-22:00, Sat 10:00-18:00<br><br>
                        A private customer only sees weekday daytime slots. 
                        A theater only sees evening and weekend slots.
                    </p>
                </div>
            </section>

            <!-- PIANO SERVICE HISTORY -->
            <section id="piano-service" class="section">
                <h2><span class="icon"><i data-lucide="piano" style="width: 24px; height: 24px;"></i></span> Piano Service History</h2>
                <p>
                    PianoPlanner automatically tracks the service history of every piano. 
                    This helps you determine when a piano needs tuning again.
                </p>

                <h3>Automatic Tracking</h3>
                <p>
                    The "Last tuning" of a piano is automatically updated based on:
                </p>
                <ul>
                    <li><strong>Appointments</strong> - Completed appointments linked to the piano</li>
                    <li><strong>Service records</strong> - Manually added service notes</li>
                    <li><strong>Manual date</strong> - If you enter a date yourself</li>
                </ul>
                <p>
                    The system automatically uses the most recent date from these three sources.
                </p>

                <h3>Service Status Indicators</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Status</th>
                            <th>Meaning</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><i data-lucide="check-circle" style="width: 16px; height: 16px;"></i> <strong>Last: [date]</strong></td>
                            <td>Piano was recently tuned, next service not yet needed</td>
                        </tr>
                        <tr>
                            <td><i data-lucide="clock" style="width: 16px; height: 16px;"></i> <strong>Service needed in X days</strong></td>
                            <td>Service is coming up (within 30 days)</td>
                        </tr>
                        <tr>
                            <td><i data-lucide="alert-triangle" style="width: 16px; height: 16px;"></i> <strong>X days past service date</strong></td>
                            <td>Service is overdue</td>
                        </tr>
                        <tr>
                            <td><i data-lucide="alert-triangle" style="width: 16px; height: 16px;"></i> <strong>Not yet tuned</strong></td>
                            <td>No service history known</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Setting Service Interval</h3>
                <p>
                    By default, PianoPlanner assumes a 6-month service interval. 
                    You can adjust this per piano:
                </p>
                <div class="steps">
                    <div class="step">
                        <div class="step-title">Open the piano</div>
                        <p>Go to the customer and click on the piano.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Adjust the interval</div>
                        <p>At "Service interval" you can change the number of months (e.g., 12 for yearly).</p>
                    </div>
                </div>

                <div class="callout callout-success">
                    <div class="callout-title"><i data-lucide="check-circle" style="width: 18px; height: 18px;"></i> Tip</div>
                    <p>
                        Concert grands and pianos in music schools often need a shorter interval (3-4 months), 
                        while hobby pianos can go 6-12 months.
                    </p>
                </div>
            </section>

            <!-- CALENDAR SLOT DURATION -->
            <section id="slot-duration" class="section">
                <h2><span class="icon"><i data-lucide="calendar" style="width: 24px; height: 24px;"></i></span> Calendar Slot Duration</h2>
                <p>
                    You can customize how the calendar displays time slots. Choose between 
                    <strong>1-hour slots</strong> or <strong>1.5-hour slots</strong> depending on your typical appointment length.
                </p>

                <h3>Changing Slot Duration</h3>
                <div class="steps">
                    <div class="step">
                        <div class="step-title">Go to the Dashboard</div>
                        <p>Open your calendar view.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Find the slot selector</div>
                        <p>In the toolbar next to the view selector (Day/Week/Month), you'll see a dropdown.</p>
                    </div>
                    <div class="step">
                        <div class="step-title">Choose your duration</div>
                        <p>Select "1 hour" or "1½ hour" from the dropdown.</p>
                    </div>
                </div>

                <div class="callout callout-info">
                    <div class="callout-title"><i data-lucide="lightbulb" style="width: 18px; height: 18px;"></i> When to use which?</div>
                    <p>
                        <strong>1 hour slots:</strong> Standard tuning appointments, quick services<br>
                        <strong>1.5 hour slots:</strong> Regulation, voicing, or when tunings typically take longer
                    </p>
                </div>

                <p>
                    Your preference is saved automatically and will be remembered next time you visit.
                </p>
            </section>

            <!-- Need Help -->
            <section class="section" style="text-align: center; padding: 48px; background: white; border-radius: 16px; margin-top: 64px;">
                <h2 style="margin-bottom: 16px;">Need Help?</h2>
                <p style="color: #666; margin-bottom: 24px;">
                    Can't figure it out? Feel free to contact us.
                </p>
                <a href="mailto:support@pianoplanner.app" class="btn btn-primary" style="display: inline-block;">
                    <i data-lucide="mail" style="width: 18px; height: 18px;"></i> Contact Support
                </a>
            </section>
        </main>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <p>© 2026 PianoPlanner. Built specially for piano technicians.</p>
    </footer>

    <script>
        // Check if mobile
        const isMobile = () => window.innerWidth <= 768;
        
        // Initialize accordion for mobile
        function initMobileAccordion() {
            if (!isMobile()) return;
            
            const sections = document.querySelectorAll('.section[id]');
            
            sections.forEach(section => {
                const h2 = section.querySelector('h2');
                if (!h2 || h2.dataset.accordionInit) return;
                
                h2.dataset.accordionInit = 'true';
                
                // Wrap h2 content in a span
                const titleContent = h2.innerHTML;
                h2.innerHTML = `
                    <span class="section-title-text">${titleContent}</span>
                    <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                `;
                
                // Wrap rest of content in section-content div
                const content = document.createElement('div');
                content.className = 'section-content';
                
                // Move all siblings after h2 into content div
                let sibling = h2.nextElementSibling;
                while (sibling) {
                    const next = sibling.nextElementSibling;
                    content.appendChild(sibling);
                    sibling = next;
                }
                section.appendChild(content);
                
                // Add click handler
                h2.addEventListener('click', (e) => {
                    e.preventDefault();
                    
                    // Close other sections
                    sections.forEach(s => {
                        if (s !== section && s.classList.contains('open')) {
                            s.classList.remove('open');
                        }
                    });
                    
                    // Toggle this section
                    section.classList.toggle('open');
                    
                    // Scroll into view if opening
                    if (section.classList.contains('open')) {
                        setTimeout(() => {
                            section.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        }, 100);
                    }
                });
            });
            
            // Open first section by default
            const firstSection = document.querySelector('.section[id]');
            if (firstSection) {
                firstSection.classList.add('open');
            }
        }
        
        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            initMobileAccordion();
            lucide.createIcons();
        });
        
        // Re-check on resize
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                if (isMobile()) {
                    initMobileAccordion();
                }
            }, 250);
        });

        // Highlight active sidebar link on scroll (desktop)
        const sections = document.querySelectorAll('.section[id]');
        const navLinks = document.querySelectorAll('.sidebar-link');

        window.addEventListener('scroll', () => {
            if (isMobile()) return;
            
            let current = '';
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (scrollY >= sectionTop - 150) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active');
                }
            });
        });

        // Smooth scroll for sidebar links (desktop)
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const target = document.querySelector(link.getAttribute('href'));
                target.scrollIntoView({ behavior: 'smooth' });
            });
        });
    </script>
</body>
</html>
